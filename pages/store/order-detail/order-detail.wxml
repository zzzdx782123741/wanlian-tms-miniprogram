<!--pages/store/order-detail/order-detail.wxml-->
<view class="detail-container">
  <block wx:if="{{order}}">
    <!-- 订单状态 -->
    <view class="status-section glass-card">
      <view class="status-badge status-{{order.status}}">
        {{order.statusText}}
      </view>
      <text class="status-tip">{{order.statusTip}}</text>
    </view>

    <!-- 订单信息 -->
    <view class="order-section glass-card">
      <view class="section-title">订单信息</view>

      <view class="info-row">
        <text class="label">订单号</text>
        <view class="value-with-action">
          <text class="value">{{order.orderNumber}}</text>
          <text class="copy-btn" bindtap="copyOrderNumber">复制</text>
        </view>
      </view>

      <view class="info-row">
        <text class="label">起点</text>
        <text class="value">{{order.origin}}</text>
      </view>

      <view class="info-row">
        <text class="label">终点</text>
        <text class="value">{{order.destination}}</text>
      </view>

      <view class="info-row">
        <text class="label">货物</text>
        <text class="value">{{order.goodsName}}</text>
      </view>

      <view class="info-row">
        <text class="label">重量</text>
        <text class="value">{{order.weight}}吨</text>
      </view>

      <view class="info-row">
        <text class="label">发布时间</text>
        <text class="value">{{order.createdAt}}</text>
      </view>
    </view>

    <!-- 报价信息（已报价状态） -->
    <block wx:if="{{order.status === 'QUOTED' || order.status === 'APPROVED' || order.status === 'IN_TRANSIT' || order.status === 'COMPLETED'}}">
      <view class="quote-section glass-card">
        <view class="section-title">报价信息</view>

        <view class="info-row">
          <text class="label">报价</text>
          <text class="value price">¥{{order.quotedPrice}}</text>
        </view>

        <view class="info-row">
          <text class="label">预计完成时间</text>
          <text class="value">{{order.estimatedTime}}</text>
        </view>

        <view class="info-row" wx:if="{{order.notes}}">
          <text class="label">备注</text>
          <text class="value">{{order.notes}}</text>
        </view>
      </view>
    </block>

    <!-- 运输信息（运输中和已完成） -->
    <block wx:if="{{order.status === 'IN_TRANSIT' || order.status === 'COMPLETED'}}">
      <view class="transport-section glass-card">
        <view class="section-title">运输信息</view>

        <view class="info-row">
          <text class="label">车牌号</text>
          <text class="value">{{order.vehiclePlateNumber}}</text>
        </view>

        <view class="info-row">
          <text class="label">司机</text>
          <text class="value">{{order.driverName}}</text>
        </view>
      </view>
    </block>

    <!-- 操作按钮 -->
    <view class="action-section">
      <button
        wx:if="{{order.status === 'PENDING'}}"
        class="action-btn glass-btn-cta"
        bindtap="quoteOrder"
      >
        填写报价
      </button>

      <button
        wx:if="{{order.status === 'PENDING' || order.status === 'QUOTED'}}"
        class="action-btn glass-btn-secondary"
        bindtap="cancelOrder"
      >
        取消订单
      </button>

      <button class="action-btn glass-btn" bindtap="contactService">
        联系客服
      </button>
    </view>
  </block>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-state">
    <text>加载中...</text>
  </view>
</view>

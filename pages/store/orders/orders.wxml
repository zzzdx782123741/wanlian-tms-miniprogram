<!--pages/store/orders/orders.wxml-->
<view class="orders-container">
  <!-- 订单列表 -->
  <view class="orders-list">
    <block wx:if="{{orders.length > 0}}">
      <view
        class="order-card glass-card"
        wx:for="{{orders}}"
        wx:key="_id"
      >
        <view class="order-header" bindtap="viewDetail" data-id="{{item._id}}">
          <text class="order-id">订单号：{{item.orderNumber}}</text>
          <view class="status-badge status-{{item.status}}">
            {{item.statusText}}
          </view>
        </view>

        <view class="order-route" bindtap="viewDetail" data-id="{{item._id}}">
          <view class="route-point">
            <text class="point-label">起点</text>
            <text class="point-value">{{item.origin}}</text>
          </view>
          <view class="route-arrow">↓</view>
          <view class="route-point">
            <text class="point-label">终点</text>
            <text class="point-value">{{item.destination}}</text>
          </view>
        </view>

        <view class="order-info" bindtap="viewDetail" data-id="{{item._id}}">
          <view class="info-row">
            <text class="label">货物</text>
            <text class="value">{{item.goodsName}}</text>
          </view>
          <view class="info-row">
            <text class="label">重量</text>
            <text class="value">{{item.weight}}吨</text>
          </view>
          <view class="info-row">
            <text class="label">发布时间</text>
            <text class="value">{{item.createdAt}}</text>
          </view>
        </view>

        <view class="order-actions">
          <!-- 第103行：填写报价按钮 -->
          <button
            wx:if="{{item.status === 'PENDING'}}"
            class="action-btn glass-btn-cta"
            bindtap="quoteOrder"
            data-id="{{item._id}}"
          >
            填写报价
          </button>
          <button
            wx:else
            class="action-btn glass-btn"
            bindtap="viewDetail"
            data-id="{{item._id}}"
          >
            查看详情
          </button>
        </view>
      </view>
    </block>

    <!-- 空状态 -->
    <view wx:else class="empty-state">
      <image class="empty-icon" src="/images/icons/empty-order.png"></image>
      <text class="empty-text">暂无订单</text>
    </view>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-state">
    <text>加载中...</text>
  </view>
</view>

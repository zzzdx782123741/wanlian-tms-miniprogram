<!--pages/vehicle/vehicle.wxml - æˆ‘çš„è½¦è¾†é¡µé¢-->
<view class="page">
  <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
  <view class="header">
    <view class="header-title">æˆ‘çš„è½¦è¾†</view>
    <view class="header-subtitle">æŸ¥çœ‹å’Œç®¡ç†æ‚¨çš„è½¦è¾†ä¿¡æ¯</view>
  </view>

  <!-- è½¦è¾†åˆ—è¡¨ -->
  <view class="vehicle-list">
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!loading && vehicles.length === 0}}">
      <text class="empty-icon">ğŸšš</text>
      <text class="empty-text">æš‚æ— è½¦è¾†ä¿¡æ¯</text>
      <text class="empty-hint">è¯·è”ç³»ç®¡ç†å‘˜åˆ†é…è½¦è¾†</text>
    </view>

    <!-- è½¦è¾†å¡ç‰‡ -->
    <view
      class="vehicle-card"
      wx:for="{{vehicles}}"
      wx:key="_id"
    >
      <!-- è½¦è¾†å¤´éƒ¨ -->
      <view class="vehicle-header">
        <view class="vehicle-plate">{{item.plateNumber}}</view>
        <view class="vehicle-status status-{{item.status}}">
          {{item.statusText}}
        </view>
      </view>

      <!-- è½¦è¾†è¯¦æƒ… -->
      <view class="vehicle-details">
        <view class="detail-row">
          <text class="detail-icon">ğŸš—</text>
          <view class="detail-info">
            <text class="detail-label">å“ç‰Œè½¦å‹</text>
            <text class="detail-value">{{item.brand}} {{item.model}}</text>
          </view>
        </view>

        <view class="detail-row" wx:if="{{item.year}}">
          <text class="detail-icon">ğŸ“…</text>
          <view class="detail-info">
            <text class="detail-label">å¹´ä»½</text>
            <text class="detail-value">{{item.year}}å¹´</text>
          </view>
        </view>

        <view class="detail-row" wx:if="{{item.vin}}">
          <text class="detail-icon">ğŸ”¢</text>
          <view class="detail-info">
            <text class="detail-label">è½¦æ¶å·</text>
            <text class="detail-value">{{item.vin}}</text>
          </view>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="vehicle-actions">
        <button
          class="action-btn primary"
          bindtap="onReport"
          data-vehicle-id="{{item._id}}"
          disabled="{{item.status !== 'normal'}}"
        >
          <text class="btn-icon">ğŸ”§</text>
          <text>æŠ¥ä¿®ç”³è¯·</text>
        </button>
        <button
          class="action-btn secondary"
          bindtap="onViewOrders"
          data-vehicle-id="{{item._id}}"
        >
          <text class="btn-icon">ğŸ“‹</text>
          <text>ç»´ä¿®è®°å½•</text>
        </button>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-state" wx:if="{{loading}}">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
  </view>
</view>

<!--pages/fleet/report/report.wxml-->
<view class="report-container">
  <!-- 统计卡片 -->
  <view class="stats-section">
    <view class="stat-card glass-card">
      <text class="stat-value">{{stats.totalOrders}}</text>
      <text class="stat-label">总订单</text>
    </view>
    <view class="stat-card glass-card">
      <text class="stat-value">{{stats.completedOrders}}</text>
      <text class="stat-label">已完成</text>
    </view>
    <view class="stat-card glass-card">
      <text class="stat-value">{{stats.inTransitOrders}}</text>
      <text class="stat-label">运输中</text>
    </view>
    <view class="stat-card glass-card">
      <text class="stat-value">{{stats.pendingOrders}}</text>
      <text class="stat-label">待处理</text>
    </view>
  </view>

  <!-- 最近订单 -->
  <view class="orders-section">
    <view class="section-title">最近订单</view>

    <block wx:if="{{orders.length > 0}}">
      <view
        class="order-card glass-card"
        wx:for="{{orders}}"
        wx:key="_id"
        bindtap="viewOrder"
        data-id="{{item._id}}"
      >
        <view class="order-header">
          <text class="order-id">{{item.orderNumber}}</text>
          <view class="status-badge status-{{item.status}}">
            {{item.statusText}}
          </view>
        </view>

        <view class="order-route">
          <view class="route-point">
            <text class="point-label">起点</text>
            <text class="point-value">{{item.origin}}</text>
          </view>
          <view class="route-arrow">↓</view>
          <view class="route-point">
            <text class="point-label">终点</text>
            <text class="point-value">{{item.destination}}</text>
          </view>
        </view>

        <view class="order-footer">
          <text class="order-price">¥{{item.price}}</text>
          <text class="order-time">{{item.createdAt}}</text>
        </view>
      </view>
    </block>

    <!-- 空状态 -->
    <view wx:else class="empty-state">
      <text class="empty-text">暂无订单数据</text>
    </view>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-state">
    <text>加载中...</text>
  </view>
</view>
